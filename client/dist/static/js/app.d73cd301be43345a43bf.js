webpackJsonp([1],{"4wE2":function(e,t){const r=/^\w*$/,n=[e=>!!e||"Required",e=>e&&e.length<16||"Must have less than 16 characters",e=>e&&e.length>=2||"Must have more than 2 characters",e=>e&&r.test(e)||"Can only contain alphanumeric characters and underscores"],a=/\S/,s=[e=>!!e||"Required",e=>e&&e.length<51||"Must have less than 51 characters",e=>e&&e.length>0||"Can't be empty",e=>e&&a.test(e)||"Must contain a least a non-whitespace character"];e.exports={checkRules:function(e,t){for(let r of t){const t=r(e);if(!0!==t)return t}return!1},usernameRules:n,nameRules:s,passwordRules:[e=>!!e||"Required",e=>e&&e.length<160||"Must have less than 160 characters",e=>e&&e.length>=6||"Must have more than 6 characters"]}},"7zck":function(e,t){},ABQF:function(e,t){},LPuE:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{dark:""}},[t("router-view")],1)},staticRenderFns:[]},s=r("VU/8")({name:"App"},a,!1,null,null,null).exports,i=r("/ocq"),o=r("NYxO"),l=r("Xxa5"),u=r.n(l),c=r("//Fk"),v=r.n(c),d=r("exGp"),p=r.n(d),f=r("mtWM"),m=r.n(f).a.create({baseURL:"http://localhost:3000/"}),h={login:function(e,t){var r=this,n=e.commit;e.dispatch;return p()(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/connect",{username:t.username,password:t.password}).then(function(e){return e.data.data&&e.data.data.id_token?(m.defaults.headers.common.Authorization="Bearer "+e.data.data.id_token,m.get("/me")):v.a.reject(new Error("Wrongly formatted response"))}).then(function(e){return n("setUser",e.data.data),!0}).catch(function(e){return console.error(e),n("setError",e.response.data.message),!1});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,r)}))()},signUp:function(e,t){var r=this,n=e.commit;return p()(u.a.mark(function e(){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.post("/users",{username:t.username,name:t.name,password:t.password}).then(function(e){return!0}).catch(function(e){return console.error(e),n("setError",e.response.data.message),!1});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,r)}))()},logout:function(e){var t=this,r=e.commit;return p()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return delete m.defaults.headers.common.Authorization,r("clearUser"),e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,t)}))()}};n.a.use(o.a);var g=new o.a.Store({state:{loading:!1,error:null,user:null},actions:h,mutations:{setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t},clearError:function(e){e.error=null},setUser:function(e,t){e.user=t},clearUser:function(e){e.user=null}},getters:{loading:function(e){return e.loading},error:function(e){return e.error},user:function(e){return e.user}}}),w=r("Dd8w"),_=r.n(w),b=r("4wE2"),x={name:"Login",data:function(){return{formHeight:280,menu:!1,active:"tab-1",validLogin:!0,validSignUp:!0,pwToggle:!0,username:"",name:"",password:"",usernameRules:b.usernameRules,nameRules:b.nameRules,passwordRules:b.passwordRules,waitLogin:!1,waitSignUp:!1,alert:!1}},methods:{login:function(){var e=this,t=this.username,r=this.password;this.$refs.formLogin.validate()&&(this.waitLogin=!0,this.$store.dispatch("login",{username:t,password:r}).then(function(t){if(t){var r=e.$route.query.redirect||"/";e.$router.push({path:r})}else e.alert=!0;e.waitLogin=!1}))},signUp:function(){var e=this,t=this.username,r=this.name,n=this.password;this.$refs.formSignUp.validate()&&(this.waitSignUp=!0,this.$store.dispatch("signUp",{username:t,name:r,password:n}).then(function(t){t?e.active="tab-1":e.alert=!0,e.waitSignUp=!1}))}},computed:_()({},Object(o.b)({error:function(e){return e.error}}))},y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("v-layout",{staticStyle:{position:"fixed",width:"100%"}},[r("v-flex",{attrs:{md12:""}},[e.error?r("v-alert",{staticClass:"mx-1",attrs:{dismissible:"",color:"error",icon:"warning"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("\n        "+e._s(e.error)+"\n      ")]):e._e()],1)],1),e._v(" "),r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[r("v-card",{staticClass:"elevation-12"},[r("v-tabs",{attrs:{color:"red"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("v-tabs-slider",{attrs:{color:"yellow"}}),e._v(" "),r("v-tab",{attrs:{href:"#tab-1",ripple:""}},[e._v("Login")]),e._v(" "),r("v-tab",{attrs:{href:"#tab-2",ripple:""}},[e._v("Sign Up")]),e._v(" "),r("v-tab-item",{key:"1",attrs:{id:"tab-1"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs10:"","offset-xs1":""}},[r("v-form",{ref:"formLogin",attrs:{"lazy-validation":""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}},model:{value:e.validLogin,callback:function(t){e.validLogin=t},expression:"validLogin"}},[r("v-text-field",{attrs:{name:"username",label:"Username",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("v-text-field",{attrs:{name:"password",autocomplete:"off",label:"Password","append-icon":e.pwToggle?"visibility":"visibility_off","append-icon-cb":function(){return e.pwToggle=!e.pwToggle},type:e.pwToggle?"password":"text",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-btn",{attrs:{color:"red",disabled:!e.validLogin||e.waitLogin},on:{click:e.login}},[e.waitLogin?r("v-progress-circular",{attrs:{indeterminate:""}}):r("span",[e._v("Login")])],1)],1)],1)],1)],1),e._v(" "),r("v-tab-item",{key:"2",attrs:{id:"tab-2"}},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs10:"","offset-xs1":""}},[r("v-form",{ref:"formSignUp",attrs:{"lazy-validation":""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.signUp(t):null}},model:{value:e.validSignUp,callback:function(t){e.validSignUp=t},expression:"validSignUp"}},[r("v-text-field",{attrs:{label:"Username",rules:e.usernameRules,required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),r("v-text-field",{attrs:{label:"Name",rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{label:"Password",hint:"At least 6 characters",rules:e.passwordRules,"append-icon":e.pwToggle?"visibility":"visibility_off","append-icon-cb":function(){return e.pwToggle=!e.pwToggle},type:e.pwToggle?"password":"text",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),r("v-btn",{attrs:{color:"red",disabled:!e.validSignUp||e.waitSignUp},on:{click:e.signUp}},[e.waitSignUp?r("v-progress-circular",{attrs:{indeterminate:""}}):r("span",[e._v("Sign Up")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var k=r("VU/8")(x,y,!1,function(e){r("LPuE")},"data-v-34dea194",null).exports,U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("img",{attrs:{src:"/static/img/logo.png"}}),this._v(" "),t("v-content",[t("h1",[this._v("You are lost.")]),this._v(" "),t("h4",[this._v("This page doesn't exist.")]),this._v(" "),t("router-link",{attrs:{to:"/"}},[this._v("Take me home.")])],1)],1)],1)],1)},staticRenderFns:[]},R=r("VU/8")({name:"NotFound"},U,!1,null,null,null).exports,L=r("BO1k"),S=r.n(L),E={name:"Main",data:function(){return{userMenu:!1,userMenuItems:[{title:"Profile",icon:"account_box",click:function(){},to:"/user/"},{title:"Settings",icon:"settings",click:function(){},to:"/settings"},{title:"Logout",icon:"exit_to_app",click:this.logout}]}},methods:{logout:function(){var e=this;this.$store.dispatch("logout").then(function(){e.$router.push({path:"/login"})})}},computed:_()({},Object(o.b)({user:function(e){return e.user}})),created:function(){var e=!0,t=!1,r=void 0;try{for(var n,a=S()(this.userMenuItems);!(e=(n=a.next()).done);e=!0){var s=n.value;if(s.hasOwnProperty("title")&&"Profile"===s.title){s.to="/user/"+this.user.username;break}}}catch(e){t=!0,r=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw r}}}},M={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-toolbar",{attrs:{color:"red",dense:"",fixed:"",app:""}},[r("v-icon",{staticClass:"mx-3"},[e._v("star")]),e._v(" "),r("v-toolbar-title",{staticClass:"mr-5 align-center"},[r("span",{staticClass:"title"},[e._v("Saezu")])]),e._v(" "),r("v-spacer"),e._v(" "),r("v-layout",{staticStyle:{"max-width":"650px"},attrs:{row:"","align-center":""}},[r("v-text-field",{attrs:{placeholder:"Search...","single-line":"","append-icon":"search","append-icon-cb":function(){},color:"white","hide-details":""}}),e._v(" "),e.user?r("v-menu",{attrs:{bottom:"","offset-y":"","nudge-top":"-6"},model:{value:e.userMenu,callback:function(t){e.userMenu=t},expression:"userMenu"}},[r("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[r("v-avatar",{attrs:{size:"36"}},[r("img",{attrs:{src:"/static/img/logo.png",alt:"avatar"}})])],1),e._v(" "),r("v-card",[r("v-list",[r("v-list-tile",[r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(e.user.name))]),e._v(" "),r("v-list-tile-sub-title",[e._v("@"+e._s(e.user.username))])],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-list",e._l(e.userMenuItems,function(t){return r("v-list-tile",{key:t.title,attrs:{to:t.to},on:{click:t.click}},[t.icon?r("v-list-tile-action",[r("v-icon",[e._v(e._s(t.icon))])],1):e._e(),e._v(" "),r("v-list-tile-content",[r("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)}))],1)],1):e._e()],1)],1),e._v(" "),r("v-content",[r("router-view")],1)],1)},staticRenderFns:[]};var q=r("VU/8")(E,M,!1,function(e){r("ABQF")},"data-v-71775a52",null).exports,$={name:"Wall",computed:_()({},Object(o.b)({user:function(e){return e.user}}))},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-content",[t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[this._v("\n        "+this._s(this.user)+"\n      ")])],1)],1)],1)},staticRenderFns:[]},A=r("VU/8")($,T,!1,null,null,null).exports;n.a.use(i.a);var C=new i.a({routes:[{path:"/",component:q,children:[{path:"",name:"Wall",component:A,meta:{requiresAuth:!0}}]},{path:"/login",name:"Login",component:k,beforeEnter:function(e,t,r){g.state.user?r({path:e.query.redirect?e.query.redirect:"/"}):r()}},{path:"*",component:R}]});C.beforeEach(function(e,t,r){var n=g.state.user;!e.matched.some(function(e){return e.meta.requiresAuth})||n&&"null"!==n?r():r({path:"/login",query:{redirect:e.fullPath}})});var F=C,O=r("3EgV"),P=r.n(O);r("7zck");n.a.use(P.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:F,store:g,components:{App:s},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.d73cd301be43345a43bf.js.map